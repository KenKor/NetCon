---
title: get-neighbor-upstream
description: 
permalink: 
aliases: 
draft: false
date: 2024-09-27
tags:
  - ApiSearchCall
  - ApiCall
  - GetNeighborUpstream
---
# API GetNeighborUpstream

The API Call `get-neighbor-upstream` retrieves the neighbors of one or more [[../Results/Search Or Trace Results/Connections (Result)|Connections (Result)]].
For each of the input connections, it will find the related objects based on the [[../Results/Connection Or Path Results/FromId|FromId]] and [[../Results/Connection Or Path Results/ToId|ToId]] following the flow. If there is an upstream flow it will use `input.toid = neighbor.fromid` or `input.toid = neighbor.toid` and if there is a downstream flow it follows `input.fromid = neighbor.fromid` or `input.fromid = neighbor.toid`.
The input connections themselves are excluded from the result.

If the search parameters are specified as wildcards, many matching records can be retrieved.

If no parameters are provided, the [[../../Overview/Sources|Sources]] (see also [[../Results/Connection Or Path Results/Role|Role]]) in the network are used as input.

## Parameters
| File                                                                         | type    | mand  | description                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| ---------------------------------------------------------------------------- | ------- | ----- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [[../Parameters/AssetTableNamePattern\|AssetTableNamePattern]]   | string  | false | Name of the asset table in the NetConConnection table. It may contain wild cards if you want to search more than one table. If this parameter is kept empty (no name and no pattern), it will change the interpretation of the [[AssetId|AssetId]] parameter.                                                                                                                                                                                                      |
| [[../Parameters/AssetId (Parameter)\|AssetId (Parameter)]]       | long    | false | The number that matches the AssetId of one or more of the NetConConnections exactly. If AssetTableNameWildCard is empty this parameter will be interpreted as ConnectionId.                                                                                                                                                                                                                                                                                |
| [[../Parameters/CustomAssetIdPattern\|CustomAssetIdPattern]]     | string  | false | The string that matches the CustomAssetId of one or more of the NetConConnections exactly or by [[wildcard|wildcard]] pattern.                                                                                                                                                                                                                                                                                                                                      |
| [[../Parameters/LabelPattern\|LabelPattern]]                     | string  | false | The string or pattern that matches the Label of the NetConConnection, if this was provided. For example: "circuitbreaker:1234" or "circuitbreaker*" or "123456789-*".                                                                                                                                                                                                                                                                                      |
| [[../Parameters/AssetHierarchyPattern\|AssetHierarchyPattern]]   | string  | false | Comma separated list of AssetHierarchy pairs. Every pair looks like 'name=value', e.g. "substation.id=3". The pairs can be in any order, e.g. "substation.id=3,installation.id=17" is the same as "installation.id=17,substation.id=3". For a match, only one of the items needs to match, so if you search for "installation.id=17, installation.id=21, installation.id=43' this will match the aforementioned List that also contains "substation.id=3". |
| [[../Parameters/SpecificationPattern\|SpecificationPattern]]     | string  | false | Comma separated list of that identifies the asset's specification information that must be matched. See also [[specification|specification]]. For example '789' or 'id=789' or 'material.id=789,core.id=3'. If enrichment has been applied, also things such as 'core_material=CU' can be used.                                                                                                                                                                          |
| [[../Parameters/WildCardAsRegex\|WildCardAsRegex]]               | boolean | false | Changes all pattern behavior for all [[Wildcard|Wildcard]] pattern parameters, for this API call only.                                                                                                                                                                                                                                                                                                                                                              |
| [[../Parameters/MaxResults\|MaxResults]]                         | integer | false | Maximum number of results you want to retrieve, 0 if you want to provide none.This can be used to avoid overflow in the receiving application if very large results are produced.                                                                                                                                                                                                                                                                          |
| [[../Parameters/IncludeGeoms\|IncludeGeoms]]                     | boolean | false | If false (default and faster), no geometries are returned. This is much faster.                                                                                                                                                                                                                                                                                                                                                                            |
| [[../Parameters/MergeGeoms\|MergeGeoms]]                         | boolean | false | If false (default) no additional geometries are retrieved. If true, one set of geometries is retrieved for all points in the result and one set for the lines (multi curve). This saves a lot of overhead in the result and can be convenient for highlighting in the receiving application.                                                                                                                                                               |
| [[../Parameters/GeomsAsArea\|GeomsAsArea]]                       | boolean | false | If false (default) no area geometry is returned. If true, one area geometry is returned (multi polygon) which is a buffer around all points and lines in a single geometry.                                                                                                                                                                                                                                                                                |
| [[../Parameters/EnrichAssetInformation\|EnrichAssetInformation]] | boolean | false | If true, then the assets in the trace results will be enriched with additional information about the asset, if so specificed in the [configuration](#asset-enrichment). The default is false (much faster).                                                                                                                                                                                                                                                |


## Results
| File                                                                                                        | type         | unique | description                                                                                                                                                                                                                                    |
| ----------------------------------------------------------------------------------------------------------- | ------------ | ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [[../Results/Search Or Trace Results/StartCount\|StartCount]]                                   | int          | false  | Number of connections that have been retrieved by using the start parameters.                                                                                                                                                                  |
| [[../Results/StartTime\|StartTime]]                                                             | datetime     | false  | The moment that the process or computation was started. Universal date + time.                                                                                                                                                                 |
| [[../Results/Search Or Trace Results/StartConnectionIds\|StartConnectionIds]]                   | long[]       | false  | List of ConnectionIds that retrieved by using the start parameters.                                                                                                                                                                            |
| [[../Results/Search Or Trace Results/Connections (Result)\|Connections (Result)]]               | Connection[] | false  | List of connections as described below that are retrieved by the search.                                                                                                                                                                       |
| [[../Results/Search Or Trace Results/ResultsCount\|ResultsCount]]                               | int          | false  | Number of connections that have been retrieved by performing the search.                                                                                                                                                                       |
| [[../Results/Search Or Trace Results/StartConnectionsNotInResult\|StartConnectionsNotInResult]] | Connection[] | false  | List of connections or paths as described below that are not retrieved by the search or trace but do match the start conditions. Only provided if start criteria have been passed.                                                             |
| [[../Results/Connection Or Path Results/GeometryA\|GeometryA]]                                  | multipolygon | false  | Area geometry providing the buffered line and point geometries of the connection(s) of this asset or group of assets.                                                                                                                          |
| [[../Results/Connection Or Path Results/GeometryL\|GeometryL]]                                  | multicurve   | false  | Line or curve geometry providing the location of the connection(s) of this asset or group of assets. Note that each connection may have part of the total line geometry of an asset, e.g. when it is split because of topological interaction. |
| [[../Results/Connection Or Path Results/GeometryP\|GeometryP]]                                  | multipoint   | false  | Point geometry denoting the position(s) of the asset or group of assets for this connection.                                                                                                                                                   |
| [[../Results/Duration\|Duration]]                                                               | timespan     | false  | Specifices the time it took to perform the process or computation. Time span in seconds. Only available when completed.                                                                                                                        |
| [[../Results/Search Or Trace Results/Success\|Success]]                                         | boolean      | false  | True if any results have been retrieved.                                                                                                                                                                                                       |
| [[../Results/Progress State/Message\|Message]]                                                  | string       | false  | Last message provided as logging information for this result or state.                                                                                                                                                                         |


## Connections
| File                                                                                           | type       | unique | description                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ---------------------------------------------------------------------------------------------- | ---------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [[../Results/Connection Or Path Results/Id\|Id]]                                   | long       | true   | Id for the NetCon connection as described in this document.                                                                                                                                                                                                                                                                                                                                                                                                               |
| [[../Results/Connection Or Path Results/FromId\|FromId]]                           | long       | false  | Id identifying the node departing from.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [[../Results/Connection Or Path Results/ToId\|ToId]]                               | long       | false  | Id identifying the node going to.                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| [[../Results/Connection Or Path Results/BiDirectional\|BiDirectional]]             | boolean    | false  | False if this connection goes only from FromId to ToId, true if it also returns back.                                                                                                                                                                                                                                                                                                                                                                                     |
| [[../Results/Connection Or Path Results/Barrier\|Barrier]]                         | int        | false  | Enumerator denoting the barring state of this connection. See [[NetCon Barrier Enumerator|NetCon Barrier Enumerator]].                                                                                                                                                                                                                                                                                                                                                                              |
| [[../Results/Connection Or Path Results/Role\|Role]]                               | integer    | false  | The role that this connection has in the commodity network. See [[NetCon Role Enumerator|NetCon Role Enumerator]].                                                                                                                                                                                                                                                                                                                                                                               |
| [[../Results/Connection Or Path Results/Flow\|Flow]]                               | string     | false  | 'DownStream' if the commodity flow from FromId towards ToId, 'Mazed' if the networks barriers are such that the flow can go both ways, 'NoFlow' if no connected path to a [[Sources\|Source]] exists, see also [[Role|Role]]. Note that you should never see 'UpStream' in API call results since this is just 'DownStream' with the from and to id swapped.                                                                                                                   |
| [[../Results/Connection Or Path Results/AssetTableName\|AssetTableName]]           | string     | false  | Name of the table where more information can be found on the asset that constitutes the connection.                                                                                                                                                                                                                                                                                                                                                                       |
| [[../Results/Connection Or Path Results/AssetId\|AssetId]]                         | long       | false  | Id of the asset in registration system.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| [[../Results/Connection Or Path Results/CustomAssetId\|CustomAssetId]]             | boolean    | false  | Company wide unique id of the asset.                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [[../Results/Connection Or Path Results/Cost\|Cost]]                               | double     | false  | Cost of using this connection in the trace.                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [[../Results/Connection Or Path Results/Status\|Status]]                           | integer    | false  | Enumerator denoting the [[Life Cycle Status|Life Cycle Status]] of this connection. See also [[NetCon Status Enumerator|NetCon Status Enumerator]].                                                                                                                                                                                                                                                                                                                                                                  |
| [[../Results/Connection Or Path Results/Label\|Label]]                             | string     | false  | Tagging information to label important assets in the network. Typically these labels can be used to retrieve the downstream parts that are dependent on the labelled asset.                                                                                                                                                                                                                                                                                               |
| [[../Results/Connection Or Path Results/IsolatableSectionId\|IsolatableSectionId]] | long       | false  | Unique id of the [[Isolatable Section\|section]] that can be isolated as a single unit.                                                                                                                                                                                                                                                                                                                                                                                   |
| [[../Results/Connection Or Path Results/OperatedSectionId\|OperatedSectionId]]     | long       | false  | Unique id of the [[Operated Section\|section]] that currently is operated as a single unit.                                                                                                                                                                                                                                                                                                                                                                               |
| [[../Results/Connection Or Path Results/FeederSectionId\|FeederSectionId]]         | long       | false  | Unique id of the [[Feeder Section\|section]] that fed from an important barrier (e.g. a 'circuit breaker') that is directly behind a station or installation (or whatever upstream criteria has been specified in the definition).                                                                                                                                                                                                                                        |
| [[../Results/Connection Or Path Results/CustomSectionId\|CustomSectionId]]         | boolean    | false  | Unique id of the [[Custom Section\|custom defined section]]. The criteria of custom defined sections are specified in the [[Configuration|Configuration]].                                                                                                                                                                                                                                                                                                                              |
| [[../Results/Connection Or Path Results/AssetHierarchy\|AssetHierarchy]]           | string     | false  | List of name=value pairs that provide more information. The order of the pairs does not matter. The asset hierarchy can be used to identify or complete parts of the network in a single step and to link to structural information that is not part of the connectivity, but relevant for the network operation. If enrichment information has been configured, a whole range of additional [[asset hierarchy enrichment\|asset hierarchy attributes]] can be retrieved. |
| [[../Results/Connection Or Path Results/Specification\|Specification]]             | string     | false  | Spec of type information of the asset, that provides relevant characteristics of the asset. E.g. for an electric network this could be the core diameter and impedance, for a gas or water network the diameter and resistance, and for a telecom network the light characteristics. If enrichment information has been configured, a whole range of additional [[specification-enrichment\|specification attributes]] can be retrieved.                                  |
| [[../Results/Connection Or Path Results/CommoditySubnetwork\|CommoditySubnetwork]] | string     | false  | CommoditySubnetwork                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [[../Results/Connection Or Path Results/CommodityFunction\|CommodityFunction]]     | boolean    | false  | Specifies the function or component of the subnetwork, e.g. the 400 (volt) or 'industrial water'.                                                                                                                                                                                                                                                                                                                                                                         |
| [[../Results/Connection Or Path Results/CommodityDetails\|CommodityDetails]]       | string     | false  | Specifies details of the commodity being transported, e.g. phase information, channels.                                                                                                                                                                                                                                                                                                                                                                                   |
| [[../Results/Connection Or Path Results/EdgeType\|EdgeType]]                       | integer    | false  | Enumerator denoting the asset this connection came from. '0' is from a node asset, '1' is from a link asset, '2' is an (inserted) terminal. See [[NetCon Edge Type Enumerator|NetCon Edge Type Enumerator]].                                                                                                                                                                                                                                                                                          |
| [[../Results/Connection Or Path Results/GeometryL\|GeometryL]]                     | multicurve | false  | Line or curve geometry providing the location of the connection(s) of this asset or group of assets. Note that each connection may have part of the total line geometry of an asset, e.g. when it is split because of topological interaction.                                                                                                                                                                                                                            |
| [[../Results/Connection Or Path Results/GeometryP\|GeometryP]]                     | multipoint | false  | Point geometry denoting the position(s) of the asset or group of assets for this connection.                                                                                                                                                                                                                                                                                                                                                                              |


  
For a more elaborate explanation see [[../../Overview/Network Ontology|Network Ontology]].

---
Example query to find the upstream Assets' connections from an Asset with TableName = 'e_transformer_fp' and Id = 456:

    https://server.domain.local/api/v2/netcon/v1/trace-neighbor-upstream?AssetTableNameWildCard=e_transformer_fp&AssetId=456

